<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#1a1a1a">
  <title>SICO MIX</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="manifest" href="manifest.json">
  <!-- jsPDF for PDF export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
</head>

<body class="light">

<header>
  <div class="header-left">
    <h1>SICO MIX</h1>
    <span id="seriesBadge"></span>
  </div>

  <div class="lang-switcher">
    <button onclick="setLang('ua')">UA</button>
    <button onclick="setLang('pl')">PL</button>
    <button onclick="setLang('en')">EN</button>
  </div>

  <button id="themeToggle" onclick="toggleTheme()" data-i18n="themeToggle">ðŸŒ™</button>
</header>

<nav>
  <button onclick="showTab('colors')" data-i18n="paints"></button>
  <button onclick="showTab('new')" data-i18n="newRecipe"></button>
  <button onclick="showTab('recipes')" data-i18n="recipes"></button>
</nav>

<main>

  <section id="colors" class="tab active">
    <h2 data-i18n="catalog"></h2>

    <div class="filter-row">
      <label data-i18n="filterSeries"></label>
      <select id="seriesFilter"></select>
      <input id="colorSearch" type="text" data-i18n-placeholder="searchPlaceholder" oninput="renderColors()">
    </div>

    <div id="colorList" class="color-grid"></div>
  </section>

  <section id="new" class="tab">
    <h2 data-i18n="newRecipe"></h2>

    <input id="recipeName" data-i18n-placeholder="recipeName">
    <textarea id="recipeNote" data-i18n-placeholder="recipeNote"></textarea>

    <select id="recipeStatus">
      <option value="draft" data-i18n="statusDraft"></option>
      <option value="ready" data-i18n="statusReady"></option>
    </select>

    <div class="filter-row">
      <input id="recipeSearch" type="text" data-i18n-placeholder="searchPlaceholder" oninput="renderAddColors()">
      <div id="addColorList" class="color-grid"></div>
    </div>

    <label class="toggle-switch">
      <input type="checkbox" onchange="toggleMode(this)">
      <span class="slider"></span>
    </label>

    <select id="totalWeight" onchange="renderCurrentRecipe()">
      <option value="100">100 g</option>
      <option value="500">500 g</option>
      <option value="1000" selected>1 kg</option>
      <option value="5000">5 kg</option>
    </select>

    <div id="recipeItems"></div>

    <div class="photo-section">
      <label data-i18n="addPhoto"></label>
      <input type="file" id="recipePhoto" accept="image/*" capture="environment">
      <img id="photoPreview" src="" alt="" style="display:none; max-width:100%; border-radius:var(--radius);">
    </div>

    <button onclick="saveRecipe()" data-i18n="addRecipe"></button>
  </section>

  <section id="recipes" class="tab">
    <h2 data-i18n="recipes"></h2>
    <div class="button-group">
      <button onclick="importRecipes()" data-i18n="import"></button>
      <input type="file" id="importFile" style="display:none;" accept=".json">
    </div>
    <div id="recipeList"></div>
  </section>

</main>

<!-- Modal for confirmations -->
<div id="modalOverlay" class="modal-overlay hidden">
  <div class="modal">
    <div class="modal-header">
      <h3 id="modalTitle"></h3>
      <button class="modal-close" onclick="closeModal()">âœ•</button>
    </div>
    <div class="modal-body" id="modalBody"></div>
    <div class="modal-footer">
      <button class="btn-secondary" onclick="closeModal()" data-i18n="cancel"></button>
      <button id="modalConfirm" class="btn-primary" data-i18n="confirm"></button>
    </div>
  </div>
</div>

<!-- Notification -->
<div id="notification" class="notification hidden"></div>

<script type="module" src="js/app.js"></script>
</body>
</html>
