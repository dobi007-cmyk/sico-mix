const i18n = {
  ua: {
    // Navigation
    paints: "Фарби",
    recipes: "Рецепти",
    newRecipe: "Новий рецепт",
    settings: "Налаштування",
    catalog: "Каталог фарб",
    
    // Recipe Form
    recipeName: "Назва рецепта",
    recipeNote: "Нотатка",
    addRecipe: "Зберегти рецепт",
    clear: "Очистити",
    draft: "Чернетка",
    ready: "Готовий",
    status: "Статус",
    statusDraft: "Чернетка",
    statusReady: "Готовий",
    
    // Colors
    colors: "фарб",
    addColors: "Додати фарби",
    colorAlreadyAdded: "Фарба вже додана",
    seriesSet: "Встановлено серію",
    
    // Calculator
    calculator: "Калькулятор",
    totalWeight: "Загальна вага",
    totalWeightGrams: "Загальна вага",
    totalColors: "Фарб",
    totalPercent: "Загальний %",
    percentMode: "% режим",
    gramMode: "г режим",
    modeChanged: "Режим змінено",
    
    // Search & Filter
    search: "Пошук",
    searchPlaceholder: "Пошук за кодом або назвою",
    searchRecipes: "Пошук рецептів",
    filterSeries: "Серія фарб",
    allSeries: "Всі серії",
    all: "Всі",
    drafts: "Чернетки",
    ready: "Готові",
    
    // Photo
    addPhoto: "Додати фото змішаної фарби",
    clickToUpload: "Натисніть для завантаження",
    maxSize: "Макс. 5МБ",
    photoAdded: "Фото додано",
    photoRemoved: "Фото видалено",
    fileTooLarge: "Файл занадто великий",
    invalidImage: "Невірний формат зображення",
    
    // Theme & Language
    themeToggle: "Змінити тему",
    themeChanged: "Тему змінено",
    light: "Світла",
    dark: "Темна",
    auto: "Авто",
    language: "Мова",
    appearance: "Зовнішній вигляд",
    
    // Data Management
    dataManagement: "Управління даними",
    exportAllData: "Експортувати всі дані",
    backup: "Резервна копія",
    backupNow: "Створити резервну копію",
    resetAll: "Скинути все",
    confirmReset: "Підтвердити скидання",
    confirmResetMsg: "Ви дійсно хочете скинути всі дані? Цю дію неможливо скасувати.",
    dataReset: "Дані скинуто",
    backupCreated: "Резервна копія створена",
    
    // Import/Export
    import: "Імпорт",
    export: "Експорт",
    exportAll: "Експортувати все",
    exportText: "Експорт JSON",
    exportPdf: "Експорт PDF",
    exportSuccess: "Експорт успішний",
    pdfExported: "PDF експортовано",
    importSuccess: "Імпорт успішний",
    importError: "Помилка імпорту",
    exportError: "Помилка експорту",
    
    // Notifications
    savedSuccess: "Рецепт збережено",
    saveError: "Помилка збереження",
    draftCleared: "Чернетку очищено",
    recipeLoaded: "Рецепт завантажено",
    recipeDeleted: "Рецепт видалено",
    
    // Errors & Warnings
    error: "Помилка",
    errorSeries: "Можна змішувати тільки в межах однієї серії",
    errorEmptyRecipe: "Вкажіть назву та додайте хоча б один колір",
    errorEmptyName: "Введіть назву рецепта",
    sumWarning: "Сума повинна бути близько 100%",
    warning: "Попередження",
    
    // Empty States
    noRecipes: "Немає рецептів",
    noColorsAdded: "Ще не додано фарб",
    createFirstRecipe: "Створіть свій перший рецепт змішування фарб!",
    createRecipe: "Створити рецепт",
    browseColors: "Переглянути фарби",
    
    // Modal
    confirmDelete: "Видалити рецепт",
    confirmDeleteMsg: "Видалити рецепт",
    cancel: "Скасувати",
    confirm: "Підтвердити",
    
    // About
    about: "Про додаток",
    appDescription: "Професійний калькулятор змішування фарб для трафаретного друку",
    
    // Quick Actions
    quickNew: "Новий",
    quickCalc: "Розрахувати",
    quickRecipes: "Рецепти",
    
    // Loading
    loading: "Завантаження..."
  },
  
  pl: {
    paints: "Farby",
    recipes: "Receptury",
    newRecipe: "Nowa receptura",
    settings: "Ustawienia",
    catalog: "Katalog farb",
    
    recipeName: "Nazwa receptury",
    recipeNote: "Notatka",
    addRecipe: "Zapisz recepturę",
    clear: "Wyczyść",
    draft: "Szkic",
    ready: "Gotowy",
    status: "Status",
    statusDraft: "Szkic",
    statusReady: "Gotowy",
    
    colors: "farby",
    addColors: "Dodaj farby",
    colorAlreadyAdded: "Farba już dodana",
    seriesSet: "Ustawiono serię",
    
    calculator: "Kalkulator",
    totalWeight: "Całkowita waga",
    totalWeightGrams: "Całkowita waga",
    totalColors: "Farby",
    totalPercent: "Suma %",
    percentMode: "Tryb %",
    gramMode: "Tryb g",
    modeChanged: "Zmieniono tryb",
    
    search: "Szukaj",
    searchPlaceholder: "Szukaj po kodzie lub nazwie",
    searchRecipes: "Szukaj receptur",
    filterSeries: "Seria farb",
    allSeries: "Wszystkie serie",
    all: "Wszystkie",
    drafts: "Szkice",
    ready: "Gotowe",
    
    addPhoto: "Dodaj zdjęcie zmieszanej farby",
    clickToUpload: "Kliknij, aby przesłać",
    maxSize: "Maks. 5MB",
    photoAdded: "Zdjęcie dodane",
    photoRemoved: "Zdjęcie usunięte",
    fileTooLarge: "Plik za duży",
    invalidImage: "Nieprawidłowy format obrazu",
    
    themeToggle: "Zmień motyw",
    themeChanged: "Zmieniono motyw",
    light: "Jasny",
    dark: "Ciemny",
    auto: "Auto",
    language: "Język",
    appearance: "Wygląd",
    
    dataManagement: "Zarządzanie danymi",
    exportAllData: "Eksportuj wszystkie dane",
    backup: "Kopia zapasowa",
    backupNow: "Utwórz kopię zapasową",
    resetAll: "Resetuj wszystko",
    confirmReset: "Potwierdź reset",
    confirmResetMsg: "Czy na pewno chcesz zresetować wszystkie dane? Tej operacji nie można cofnąć.",
    dataReset: "Dane zresetowane",
    backupCreated: "Utworzono kopię zapasową",
    
    import: "Import",
    export: "Eksport",
    exportAll: "Eksportuj wszystko",
    exportText: "Eksport JSON",
    exportPdf: "Eksport PDF",
    exportSuccess: "Eksport udany",
    pdfExported: "PDF wyeksportowany",
    importSuccess: "Import udany",
    importError: "Błąd importu",
    exportError: "Błąd eksportu",
    
    savedSuccess: "Receptura zapisana",
    saveError: "Błąd zapisu",
    draftCleared: "Szkic wyczyszczony",
    recipeLoaded: "Receptura załadowana",
    recipeDeleted: "Receptura usunięta",
    
    error: "Błąd",
    errorSeries: "Można mieszać tylko w jednej serii",
    errorEmptyRecipe: "Podaj nazwę i dodaj kolor",
    errorEmptyName: "Wprowadź nazwę receptury",
    sumWarning: "Suma powinna być około 100%",
    warning: "Ostrzeżenie",
    
    noRecipes: "Brak receptur",
    noColorsAdded: "Nie dodano farb",
    createFirstRecipe: "Utwórz swoją pierwszą recepturę mieszania farb!",
    createRecipe: "Utwórz recepturę",
    browseColors: "Przeglądaj farby",
    
    confirmDelete: "Usuń recepturę",
    confirmDeleteMsg: "Usunąć recepturę",
    cancel: "Anuluj",
    confirm: "Potwierdź",
    
    about: "O aplikacji",
    appDescription: "Profesjonalny kalkulator mieszania farb do druku sitowego",
    
    quickNew: "Nowy",
    quickCalc: "Oblicz",
    quickRecipes: "Receptury",
    
    loading: "Ładowanie..."
  },
  
  en: {
    paints: "Paints",
    recipes: "Recipes",
    newRecipe: "New recipe",
    settings: "Settings",
    catalog: "Paint catalog",
    
    recipeName: "Recipe name",
    recipeNote: "Note",
    addRecipe: "Save recipe",
    clear: "Clear",
    draft: "Draft",
    ready: "Ready",
    status: "Status",
    statusDraft: "Draft",
    statusReady: "Ready",
    
    colors: "colors",
    addColors: "Add colors",
    colorAlreadyAdded: "Color already added",
    seriesSet: "Series set to",
    
    calculator: "Calculator",
    totalWeight: "Total weight",
    totalWeightGrams: "Total weight",
    totalColors: "Colors",
    totalPercent: "Total %",
    percentMode: "% mode",
    gramMode: "g mode",
    modeChanged: "Mode changed",
    
    search: "Search",
    searchPlaceholder: "Search by code or name",
    searchRecipes: "Search recipes",
    filterSeries: "Paint series",
    allSeries: "All series",
    all: "All",
    drafts: "Drafts",
    ready: "Ready",
    
    addPhoto: "Add photo of mixed paint",
    clickToUpload: "Click to upload",
    maxSize: "Max 5MB",
    photoAdded: "Photo added",
    photoRemoved: "Photo removed",
    fileTooLarge: "File too large",
    invalidImage: "Invalid image format",
    
    themeToggle: "Toggle theme",
    themeChanged: "Theme changed",
    light: "Light",
    dark: "Dark",
    auto: "Auto",
    language: "Language",
    appearance: "Appearance",
    
    dataManagement: "Data management",
    exportAllData: "Export all data",
    backup: "Backup",
    backupNow: "Backup now",
    resetAll: "Reset all",
    confirmReset: "Confirm reset",
    confirmResetMsg: "Are you sure you want to reset all data? This action cannot be undone.",
    dataReset: "Data reset",
    backupCreated: "Backup created",
    
    import: "Import",
    export: "Export",
    exportAll: "Export all",
    exportText: "Export JSON",
    exportPdf: "Export PDF",
    exportSuccess: "Export successful",
    pdfExported: "PDF exported",
    importSuccess: "Import successful",
    importError: "Import error",
    exportError: "Export error",
    
    savedSuccess: "Recipe saved",
    saveError: "Save error",
    draftCleared: "Draft cleared",
    recipeLoaded: "Recipe loaded",
    recipeDeleted: "Recipe deleted",
    
    error: "Error",
    errorSeries: "You can mix only within one series",
    errorEmptyRecipe: "Enter name and add color",
    errorEmptyName: "Enter recipe name",
    sumWarning: "Sum should be around 100%",
    warning: "Warning",
    
    noRecipes: "No recipes",
    noColorsAdded: "No colors added",
    createFirstRecipe: "Create your first paint mixing recipe!",
    createRecipe: "Create recipe",
    browseColors: "Browse colors",
    
    confirmDelete: "Delete recipe",
    confirmDeleteMsg: "Delete recipe",
    cancel: "Cancel",
    confirm: "Confirm",
    
    about: "About",
    appDescription: "Professional paint mixing calculator for screen printing",
    
    quickNew: "New",
    quickCalc: "Calculate",
    quickRecipes: "Recipes",
    
    loading: "Loading..."
  }
};

export let currentLang = localStorage.getItem("sico_lang") || "ua";

export function t(key) {
  return i18n[currentLang]?.[key] || key;
}

export function setLang(lang) {
  if (!i18n[lang]) return;
  
  currentLang = lang;
  localStorage.setItem("sico_lang", lang);
  
  // Update all elements with data-i18n
  document.querySelectorAll("[data-i18n]").forEach(el => {
    const key = el.dataset.i18n;
    const translation = t(key);
    
    if (translation !== key) {
      el.textContent = translation;
    }
  });
  
  // Update placeholders
  document.querySelectorAll("[data-i18n-placeholder]").forEach(el => {
    el.placeholder = t(el.dataset.i18nPlaceholder);
  });
  
  // Update select options
  document.querySelectorAll("option[data-i18n]").forEach(opt => {
    opt.textContent = t(opt.dataset.i18n);
  });
  
  // Update title attributes
  document.querySelectorAll("[data-i18n-title]").forEach(el => {
    el.title = t(el.dataset.i18nTitle);
  });
  
  // Update aria-labels
  document.querySelectorAll("[data-i18n-aria-label]").forEach(el => {
    el.setAttribute('aria-label', t(el.dataset.i18nAriaLabel));
  });
  
  // Update HTML lang attribute
  document.documentElement.lang = lang;
  
  // Trigger re-render if renderAll exists
  if (typeof window.renderAll === 'function') {
    window.renderAll();
  }
  
  console.log(`Language changed to: ${lang}`);
}
